{% extends 'base.html.twig' %}

{% block title %}Tableau de Bord Personnalisé{% endblock %}

{% block body %}
    <div class="flex items-center justify-center min-h-screen bg-gray-700">
        <div class="text-center">
            <h1 class="text-custom-green text-7xl font-bold mb-6" id="animated-title">stare-it</h1>
            <div class="w-full">
                <table class="custom-table bg-white center">
                    <thead>
                        <tr>
                            <th>Id</th>
                            <th>Email</th>
                            <th>Nom</th>
                            <th>Prénom</th>
                            <th>Rôles</th>
                        </tr>
                    </thead>
                    <tbody>
                        {% set allUsers = users | merge(admins) %}
                        {% if allUsers %}
                            {% for user in allUsers %}
                                <tr>
                                    <td>{{ user.id }}</td>
                                    <td>{{ user.email }}</td>
                                    <td>{{ user.nom }}</td>
                                    <td>{{ user.prenom }}</td>
                                    <td>{{ user.roles|join(', ') }}</td>
                                </tr>
                            {% endfor %}
                        {% else %}
                            <tr>
                                <td colspan="4">Aucun utilisateur trouvé.</td>
                            </tr>
                        {% endif %}
                    </tbody>
                </table>
            </div>
        </div>
    </div>

    <style>
    #animated-title {
            display: inline-block;
            background: linear-gradient(45deg, #9bf0db, #7F00FF, #38FF9C);
            -webkit-background-clip: text;
            color: transparent;
            opacity: 0;
            animation: gradientFadeIn 2s ease-in-out forwards;
        }
        @keyframes zoomIn {
            from {
                transform: scale(0);
            }
            to {
                transform: scale(1);
            }
        }

        @keyframes gradientFadeIn {
            100% {
                opacity: 0;
            }
            10% {
                opacity: 0;
            }
            100% {
                opacity: 2;
            }
        }
        /* Styles pour le tableau */
        .custom-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
            color: #ffblack;
        }

        .custom-table th,
        .custom-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .custom-table th {
            background-color: purple;
            color: black;
        }
    </style>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
            animateTitle();
        });

        function animateTitle() {
            const title = document.getElementById("animated-title");
            const text = title.innerText;
            title.innerText = "";

            for (let i = 0; i < text.length; i++) {
                setTimeout(() => {
                    title.innerText += text[i];
                }, i * 200);
            }
        }
    </script>
{% endblock %}
